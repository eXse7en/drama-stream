<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Episode</title>
<style>
body {
  background:#0b1220;
  color:#fff;
  font-family:system-ui;
}
header {
  padding:14px;
  background:#020617;
  text-align:center;
  font-weight:600;
}
.episode {
  padding:12px;
  border-bottom:1px solid #1e293b;
}
a { color:#38bdf8; text-decoration:none; }
</style>
</head>
<body>

<header id="title">Episode</header>
<div id="episodes">Memuat episode...</div>

<script>
const params = new URLSearchParams(location.search);
const bookId = params.get("bookId");
const dramaId = params.get("dramaId");
const title = params.get("title");

document.getElementById("title").innerText = title || "Episode";

fetch(`https://restxdb.onrender.com/api/episode/list/${bookId}?dramaId=${dramaId}&order=asc&lang=in`)
  .then(res => res.json())
  .then(res => {
    const box = document.getElementById("episodes");
    box.innerHTML = "";

    if (!res.data?.list?.length) {
      box.innerHTML = "Episode tidak tersedia";
      return;
    }

    res.data.list.forEach(ep => {
      box.innerHTML += `
        <div class="episode">
          <a href="player.html?epId=${ep.id}&title=${encodeURIComponent(ep.title)}">
            â–¶ Episode ${ep.title}
          </a>
        </div>
      `;
    });
  })
  .catch(() => {
    document.getElementById("episodes").innerHTML = "Gagal memuat episode";
  });
</script>

</body>
</html>
